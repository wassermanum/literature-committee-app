#!/usr/bin/env node

const { execSync } = require('child_process');

console.log('üß™ –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ –¥–ª—è 5-–≥–æ —Ç–∞—Å–∫–∞: API —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ –∏ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è–º–∏\n');

try {
  // –ó–∞–ø—É—Å–∫–∞–µ–º —Ç–µ—Å—Ç—ã –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
  console.log('üìã –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π...');
  execSync('npm test -- --testPathPattern="user.test.ts" --silent', { 
    stdio: 'inherit',
    cwd: __dirname 
  });
  console.log('‚úÖ –¢–µ—Å—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø—Ä–æ—à–ª–∏ —É—Å–ø–µ—à–Ω–æ\n');

  // –ó–∞–ø—É—Å–∫–∞–µ–º —Ç–µ—Å—Ç—ã –¥–ª—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–π
  console.log('üè¢ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–π...');
  execSync('npm test -- --testPathPattern="organization.test.ts" --silent', { 
    stdio: 'inherit',
    cwd: __dirname 
  });
  console.log('‚úÖ –¢–µ—Å—Ç—ã –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–π –ø—Ä–æ—à–ª–∏ —É—Å–ø–µ—à–Ω–æ\n');

  console.log('üéâ –í—Å–µ —Ç–µ—Å—Ç—ã –¥–ª—è 5-–≥–æ —Ç–∞—Å–∫–∞ –ø—Ä–æ—à–ª–∏ —É—Å–ø–µ—à–Ω–æ!');
  console.log('\nüìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã:');
  console.log('- ‚úÖ User API: 12 —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ—à–ª–∏');
  console.log('- ‚úÖ Organization API: 14 —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ—à–ª–∏');
  console.log('- ‚úÖ –û–±—â–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: 26 —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ—à–ª–∏');

} catch (error) {
  console.error('‚ùå –¢–µ—Å—Ç—ã –∑–∞–≤–µ—Ä—à–∏–ª–∏—Å—å —Å –æ—à–∏–±–∫–æ–π:', error.message);
  process.exit(1);
}